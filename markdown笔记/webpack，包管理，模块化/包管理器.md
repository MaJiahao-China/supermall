# 包管理工具

## 概念

- 模块(module)：单文件形式的功能片段

- 库(library)：多个模块组成的完整功能块

- 包(package)：包含元数据的库

## 包管理器

- npm，yarn，其他

- npm只有在node环境下使用，浏览器上无法使用(浏览器无法实现本地文件的创建，获取和删除等操作)

## npm 

### npm cli

1. 安装，调用，生成

- ```npm install <package> (-g/-global)```(全局)下载

- ```npx cli-name```调用有cli包的cli

- ```npm install``` 下载package.json配置的包

- ```npm init (-y/-yes)``` 生成配置文件(配置信息全部yes)

- ```npm install -D/--save-dev <package>``` 安装开发环境依赖

- ```npm run <script>```  运行脚本配置，一般运行第三方包的cli

- ```npm install -E <package>(@x.x.x)```  精确最新安装版本(某版本)

2. 查询

- ```npm root -g``` 查看包安装路径

- ```npm view/v <package> ``` 查看包信息

- ```npm list  ``` 查询安装包

3. 更新

- ```npm outdated```  检查更新

- ```npm update <package> [-g] ``` 更新包

- ```npm uninstall/un/r  <package>``` 卸载包

4. 配置

- ```npm config [-l] [-json]``` 查看配置

- ```npm config get xxx```获取某配置项

- ```npm config set xxx```设置某配置项

- ```npm config delete xxx```删除某配置项

### npm注意点

1. 包的安装

> 本地安装的包出现在当前目录下的```node_modules```目录中；通常使用```.gitignore```文件忽略该目录中的内容；
>本地安装的包带有 CLI，npm 会将它的 CLI 脚本文件放置到```node_modules/.bin```下，使用命令```npx 命令名```即可调用

2. 包的配置

> npm 将每个使用 npm 的工程本身都看作是一个包，包的信息需要通过一个名称固定的配置文件来描述:package.json
> -save 是之前没有package.json下载包时必须带的，现在不需要
> 下载的依赖会在package.json的```dependencies```和```devDependencies```

3. 包的使用

> commonJs导入，如果模块路径不是以 ./ 或 ../ 开头，则 node 会认为导入的模块来自于 ```node_modules``` 目录
> 如导入```test```(1)寻找```test.js```文件(2)寻找```test```/入口文件,若包里json配置了main字段，读取main字段作为入口文件，否则使用index.js作为入口文件

4. 语义版本

>  ```package-lock.json```记录安装包的确切依赖关系，恢复安装时，会按照 package-lock.json 文件中的确切依赖进行安装，最大限度的避免了差异

5. npm脚本

> npm脚本配置
- start
- stop
- test
不需要使用run，start脚本有默认值：node server.js;

6. 运行环境配置

目标： 设置node的全局变量global的process.env. NODE_ENV改变运行环境
> 导入第三方库cross-env 对环境变量进行设置
> package.json设置```cross-env NODE_ENV=...```

7. 



