# 1. css样式loader

```js
// css-loader.js
module.exports = sourceCode => {
  console.log(sourceCode);
  return `const style = document.createElement('style');
    style.innerHTML = \`${sourceCode}\`;
    document.head.appendChild(style);
    module.exports = \`${sourceCode}\`;
    `;
}

//config
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ["./loaders/css-loader.js"]
      }
    ]
  }
}
```

# 2. img-loader

```js
//img-loader
const loaderUtil = require("loader-utils")

function loader(buffer) {  //对图片的二进制数据进行处理
  console.log(buffer.byteLength);
  const {limit = 5000, filename = '[contenthash].[ext]'} = loaderUtil.getOptions(this);
  let content = '';
  if (buffer.byteLength >= limit) {
    content = getFilePath.call(this, buffer, filename);
  } else {
    content = getBase64(buffer);
  }
  return `module.exports = \`${content}\``;
}

loader.raw = true; // 处理的是原始数据
module.exports = loader;

function getBase64(buffer) {
  return "data:image/png;base64," + buffer.toString("base64");
}
function getFilePath(buffer, name) {
  const filename = loaderUtil.interpolateName(this, name, {
    content: buffer
  });
  this.emitFile(filename, buffer);
  return filename;
}

//config
module.exports = {
  module: {
    rules: [
      {
        test: /\.(png)|(jpg)|(gif)$/, 
        use: [{
            loader: "./loaders/img-loader.js",
            options: {
              limit: 3000, //3000字节以上使用图片，3000字节以内使用base64
              filename: "img-[contenthash:5].[ext]"
            }
        }],
      }
    ]
  }
}
```