# 并发与并行

1. 专业解释： 

- 并发：不同的代码块交替执行

- 并行：不同的代码块同时执行

2. 实现上：

**并发指的是代码逻辑上可以并行，有并行的潜力，但是不一定当前是真的以物理并行的方式运行。并发指的是代码的性质，并行指的是物理运行状态。**

- 并发强调任务的抽象调度；

- 并行强调任务的实际执行。


# UI多线程

1. js引擎线程与 GUI线程**互斥**

    js可以操作DOM，进而会影响GUI的渲染结果，因此js引擎线程与GUI线程互斥，GUI线程处于冻结状态。

    js是基于单线程运行的，因为js引擎是统一的，但同时又可以异步执行，因为js的执行环境是可以多线程的。


2. js主线程的同步

    函数调用栈

2. 定时器的异步
    
    setTimeOut 的等待时间并不是直接执行的而是先推入浏览器的一个回调队列，在同步队列结束后在依次依次调用任务队列的任务。

    即使执行栈为空，0ms也打不到，html标准最低4ms。

    setInterval是每隔一段时间把任务放到Event Queue中
```javascript
var lTime = + new Date(); 
function a(timer) {
    for (let i = 0; i < timer; i++) {
    console.log(i);
    } 
}

setTimeout(function() {
    var nTime = + new Date();
    console.log(nTime - lTime);
},20);
```


# event loop本质

事件循环：最基本的事情是监视调用堆栈和回调队列。如果调用堆栈为空，它将从队列中获取第一个事件，并将其推送到调用堆栈，这将有效地运行他。

这样的迭代在事件循环中叫做**tick标记**。

<img src='../../../img/event_loop.jpg'>

1. js引擎只能调用其他线程而不能访问线程。这就是web API，他们是浏览器的并发部分。

