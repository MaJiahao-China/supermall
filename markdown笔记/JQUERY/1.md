# jquery 概述
1. $()  传参形式：类css   dom    jquery  (a, b):选择b里的a元素 

2. css({option}) 方法

## 选择器

1. eq(index)        获取jQuery对象

2. get(index)       获取dom

3. find()           向下查找dom   参数：css dom jquery

4. filter() not()   筛选当前dom  参数：css dom jquery function 

6. has()            筛选含有某元素的元素

7. is()             return boolean

8. add()            集中操作

9. end()            回退操作

## 取赋值

1. attr()  prop()   属性设置

attr()              基于setAttribute(), getAttribute() 自定义属性，特性

prop()              基于dom  特性映射(checked, selected, disabled)，非特性不映射(timer等)

2. html() text() size()     设置文本

html()              基于innerHTML,可传入结构，参数可以是回调函数(index,innerHTML) => {}

text()              基于innertext,不能解析结构，传入的是文本节点

size()              相当于jquery对象的length

3. addClass() removeClass() hasClass()

4. val()            表单元素value属性，基于js的object

不传参获取value，传参设置value，可传回调函数;
input：text的val() 不改变行间样式，只体现在视图上

## 增删改查     事件中比较常用

可传入参数进行筛选，若不符合就不获取

1. next() prev() nextAll() prevAll() nextUntil() prevUntil() siblings()

until传入两个参数，1.到哪个dom, 2.限定获取的dom

2. parent() parents() closest() .offsetParent()

父元素，所有父元素们，第一个父元素（传参才能返回jquery对象，传参可以包含自己），第一个有定位的父元素

3. 插入方法 

insertBefore(selector) //将this插到参数选择的dom前面  before( $() )   //转移结构或添加创建结构,把参数文本或结构插到this前面

返回的都是this

insertAfter(selector)   after( $() )

添加结构

append( $() )     appendTo()

prepend( $() )  prependTo()

4. 删除方法

remove()            加回来时没有事件   

detach()            加回来时事件还在

5. $('模板')        创建结构

6. 包裹方法

wrap()              参数：string(模板)  jquery对象  函数    例：wrap('<div/>')

wrapInner()         把dom里的结构用一个结构包裹起来

wrapAll()           给多个(最好是同级)dom加一个统一的父级

unwrap()            去除父级

7. clone() data()

clone()             克隆，参数：true可以克隆事件和data，但不能克隆prop

data()              在jquery对象上存信息，存状态，存数据，参数：一个字符串查找；两个字符串或对象设置；

好处：避免直接操作dom，通过映射将数据存储在cache，比将数据放在html行间和dom.添加属性性能都要好

## 事件方法

1. on()             绑定事件    参数：type(!), selector, data, handler(!)

data是string时会被解析为selector，最好要不用string，data会绑定在事件对象上；

selector是事件委托的限定

一次绑定多个事件传入对象，如{click: function () {}, mouseenter: function () {}}

2. one()            绑定一次性事件

3. off()            解除事件    参数：type, selector, handler

4. trigger()        执行事件或自定义事件    参数：type(!), rest回调函数参数{array} 

5. hover()          mouseenter + mouseleave 参数：事件对应的两个回调函数

6. mousewheel/click/mousedown等

## 动画     

1. hide()   show()  toggle(): 包含前两者，自带判断条件      在display变化过程中width,height,margin,left,padding,left,top等都变化

参数：null  直接改变display;  duration, easing, callback    

2. fadeIn()   fadeOut()    fadeTo()    fadeToggle()    只改变opacity    fadeTo可以多穿一个参数表示终点的opacity

3. slideDown()  slideUp()   slideToggle()   只改变宽高度

4. animate()    stop()  finish()    jquery.fx.off

animate() 特点：内置队列(无需不断放置callback)      参数：target{object} duration easing callback

stop()  不传参: 阻止当前运动进入下一次运动的目标点      一个参数true：阻止当前运动      两个参数：组织当前运动并且瞬移到目标点

finish()    直接到达最后运动的目标点

delay()     延迟

jquery.fx.off   控制所有动画的开关 

### animate队列实现

queue()  dequeue()  clearQueue()

## 位置图形

以下方法可以取值也可以设置

offset()            返回距离文档的坐标{left:?, top:?}

position()          相对有position!==static的父级的坐标

scrollTop/Left()    滚动条滚动距离

width/height()      content区宽高

innerWidth/height() content+padding

outerWidth/height() content+padding+border

## 遍历方法

each()              将选中的jquery对象的dom遍历

children()          选中dom的子元素

index()             返回在兄弟元素中的索引值，参数有过滤作用

## jquery工具方法

不同点：定义在$的方法

$.type()        判断数据类型

$.trim()        返回没有空格的字符串

$.proxy()       改变this，相当于bind

$.noConflict()  防止冲突

$.each()        相当于数组的forEach

$.parseJSON()   相当于JSON.parse(JSON的键必须是双引号的字符串的对象,加一个引号)

$.makeArray()   两个参数，将前者拼接到后者到数组或类数组，类别看后面数组

$.extend()      扩展方法;浅层克隆，深层克隆(参数加true) 引用值是否在一个索引上(相当于Object.assign())  

$.fn.extend()   (实例方法)  


### 高级工具方法

$.ajax()        发送ajax请求，参数是一个对象

{
    url, 

    type(请求类型), 

    data, 

    success(请求成功后的处理函数), 

    error(失败后的处理函数), 

    complete(请求完成的处理函数),

    content(改变函数上下文this),

    async(true or false是否异步),

    dataType('jsonp')
};

$.Callbacks()

js单线程 => 异步编程优化体验，防止阻塞 => 回调函数

```javascript
    //可传入参数once, memory, 
    const cb = $.Callbacks();
    //假设声明了函数A, B, C
    //添加函数
    cb.add(A, B, C);
    //释放函数，依次执行,可以传参
    cb.fire('参数');
```

once            函数只能释放一次

memory          函数记忆功能，所有add的函数都执行，不论add和fire的位置如何

unique          函数不能重复

stopOnFalse     执行到返回false的函数时退出执行队列

### 回调地狱    

单一职责原则    开闭原则

$.Defferred     有条件的回调函数，对回调函数的优化

done()  fail()  progress()          注册函数

resolve()   reject()    notify()    执行函数

```javascript
    function createScore() {
        const df = $.Deferred();
        setInterval(() => {
            const score = Math.random() * 100;
            if (score > 60) {
                df.resolve('win');
            }else if (score < 50) {
                df.reject('defeat');
            }else {
                df.notify('waiting');
            }
        }, 1000);
        return df.promise();
    }
    const df = createScore();
    //注册成功，失败，进行时的函数
    df.done(function (msg) {
        console.log('回调成功' + msg);
    });
    df.fail(function (msg) {
        console.log('回调失败' + msg);
    });
    df.progress(function (msg) {
        console.log('正在等待' + msg);
    });

    //then简化注册
    df.then(function (msg) {
        console.log('回调成功' + msg);
        return 'ok!';
    }, function (msg) {
        console.log('回调失败' + msg);
        return 'no!'
    }, function (msg) {
        console.log('正在等待' + msg);
        return 'just so so...'
    }).then(function (ms) {
        console.log('回调成功' + ms);
        return 'ok!';
    }, function (ms) {
        console.log('回调失败' + ms);
        return 'no!'
    }, function (ms) {
        console.log('正在等待' + ms);
        return 'just so so...'
    });

```

$.when      参数可以是一个或多个延迟对象，返回一个promise对象

```javascript
    //三个延迟对象有一个fail，就执行reject;都done则执行resolve
    $.when(async(), async(), async()).then(function () {}, function () {});
```





